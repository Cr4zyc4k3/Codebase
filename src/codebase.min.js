GM_info={script:{name:"ReSi-Codebase",version:"1.6.1"}},(async()=>{function g(a){return a.replaceAll("<","").replaceAll(">","")}async function h(){return new Promise(async a=>{"granted"===Notification.permission?a(!0):"denied"!==Notification.permission&&await Notification.requestPermission(b=>{"granted"===b?a(!0):a(!1)})})}getAPI=async function(a){return new Promise(!sessionStorage.getItem(`a${a}`)||JSON.parse(sessionStorage.getItem(`a${a}`)).lastUpdate>3e5*(new Date).getTime()?b=>{$.ajax({url:`/api/${a}`,dataType:"json",type:"GET",error(c){noticeModal("Error",`Es ist ein Fehler bei einem GET einer API aufgetreten<br>Script: ${GM_info.script.name}<br>Version: ${GM_info.script.version} <br>Autor: ${GM_info.script.author}`),console.error(`Error while fetching API ${a}:`),console.error(c),b("Error")},success(c){sessionStorage.setItem(`a${a}`,JSON.stringify({value:c,lastUpdate:(new Date).getTime()})),b(c)}})}:b=>{b(JSON.parse(sessionStorage.getItem(`a${a}`)).value)})};let d=`<style>
.codebase:focus{
outline: none;
}
</style>`;$(document.head).append(d);try{"/"==location.pathname&&($("#darkMode").html().includes("Tag")?localStorage.setItem("darkmode_resi_base","true"):localStorage.setItem("darkmode_resi_base","false"))}catch{console.error("Darkmode-Button nicht gefunden")}$("#darkMode").on("click",()=>{"true"==localStorage.getItem("darkmode_resi_base")?localStorage.setItem("darkmode_resi_base","false"):localStorage.setItem("darkmode_resi_base","true")});let b=[{name:"Gesamtm\xfcnzenz\xe4hler",description:"Zeigt in der Seitenleiste die gesamt verdienten M\xfcnzen an.",settingsTarget:"gesamtmuenzen",helpLink:"",version:"1.0.0",author:"NiZi112",target:"gesamtmuenzenCheck",async func(b){let a=await getAPI("user");$("#darkMode").after(`<li>${a.muenzenTotal?a.muenzenTotal.toLocaleString():"XXX"} M\xfcnzen</li>`)},keywords:["M\xfcnzen","Gesamtm\xfcnzen","Zahl","Z\xe4hler","verdient"],hasSettings:!1,allSite:!1,settings:[]},{name:"Toplist-Position",description:"Zeigt in Seitenleiste im Toplist-Link direkt die aktuelle Position auf der Topliste.",helpLink:"",version:"1.0.0",author:"NiZi112",settingsTarget:"toplist",target:"toplistCheck",keywords:["Toplist","Toplist-Position","Position","Topliste","Toplisten-Position"],allSite:!1,async func(b){let a=await getAPI("user");$(".dropdown-content li").eq(3).html(`Topliste: ${a.toplistRank}`)},hasSettings:!1,settings:[]},{name:"Maximierte Einsatzliste",description:"Maximiert die Einsatzliste dauerhaft.",helpLink:"",version:"1.0.0",author:"NiZi112",settingsTarget:"einsatzlisteMax",target:"maxMissionlistCheck",keywords:["erweitert","Einsatzliste","erweiterte Einsatzliste","maximiert","maximierte Einsatzliste"],allSite:!1,async func(a){$("#missions .panel-expand").children().eq(0).click()},hasSettings:!1,settings:[]},{name:"Flogout (Fast Logout)",description:"Zeigt direkt oben links am Rand ein Logout-Symbol",helpLink:"",version:"1.0.0",author:"NiZi112",settingsTarget:"flogout",target:"flogoutCheck",keywords:["FastLogout","Logout","Fast","Logout","schneller","Logout"],allSite:!1,async func(a){$(".brand-img:first").css("display","inline").css("padding-right","20px").html('<i class="fas fa-sign-out-alt"></i>').on("click",()=>{$.ajax({url:"/api/deauthenticate",type:"GET",success(){window.location.reload()}})})},hasSettings:!1,settings:[]},{name:"Eigener Streammode-Text",description:"Zeigt statt dem Chat euren eigenen Text an",helpLink:"",version:"1.0.0",author:"NiZi112",settingsTarget:"streammode",target:"streammodeCheck",keywords:["Streamer","Youtube","Streammode-Text","Streammode","Streamer-Modus","Twitch","YT"],allSite:!1,async func(a){$("#chat").html(a.text.stream_mode?a.text.stream_mode:"").css("padding","15px")},hasSettings:!0,settings:[{subtarget:"text",target:"streamerText",name:"Text",type:"input-text",settingsKey:"stream_mode",preset:"TEXT",default:'Lade dir JETZT die ReSi-Codebase herunter: <a href="https://github.com/Notme112/Codebase/raw/main/install.user.js" target="_blank">github.com/Notme112/Codebase/raw/main/install.user.js</a>'}]},{name:"Eigene Sounds",description:"Erlaubt euch, eigene Sounds in das Spiel zu bringen",helpLink:"",version:"1.0.0",author:"NiZi112",settingsTarget:"ownSound",target:"ownSoundCheck",keywords:["Streamer","Youtube","Streammode-Text","Streammode","Streamer-Modus"],allSite:!1,async func(a){sounds.radioFMS=new Audio(a.audio.fms?a.audio.fms:""),sounds.newCall=new Audio(a.audio.newCall?a.audio.newCall:""),sounds.fms5=new Audio(a.audio.fms5?a.audio.fms5:""),sounds.finishedMission=new Audio(a.audio.finish?a.audio.finish:""),sounds.error=new Audio(a.audio.error?a.audio.error:"")},hasSettings:!0,settings:[{subtarget:"audio",target:"newCallAudio",name:"Neuer-Anruf-Sound",type:"input-text",settingsKey:"newCall",preset:"URL",default:"/sounds/newCall.mp3"},{subtarget:"audio",target:"fmsAudio",name:"FMS-Sound",type:"input-text",settingsKey:"fms",preset:"URL",default:"/sounds/radioFMS.mp3"},{subtarget:"audio",target:"fms5Audio",name:"FMS5-Sound",type:"input-text",settingsKey:"fms5",preset:"URL",default:"/sounds/fms5.mp3"},{subtarget:"audio",target:"errorAudio",name:"Error-Sound",type:"input-text",settingsKey:"error",preset:"URL",default:"/sounds/error.mp3"},{subtarget:"audio",target:"finischAudio",name:"Einsatz-abgeschlossen-Sound",type:"input-text",settingsKey:"finish",preset:"URL",default:"/sounds/finishedMission.mp3"}]},{name:"Autocomplete verhindern",description:"Verhindert den Autocomplete des Browsers bei den Feldern der Einsatzannahme und des Chats.",helpLink:"",version:"1.0.0",author:"NiZi112",settingsTarget:"autocomplete",target:"autocompleteCheck",keywords:["Browser","complete","verhindern","autocomplete"],allSite:!0,async func(a){$("#chatInput").attr("autocomplete","off"),$("#newMissionNameInput").attr("autocomplete","off"),$("#newNameInput").attr("autocomplete","off"),$("#newMissionRoadInput").attr("autocomplete","off"),$("#newMissionHousenumberInput").attr("autocomplete","off"),$("#newMissionCityInput").attr("autocomplete","off")},hasSettings:!1,settings:[]},{name:"[outdated] Einsatzz\xe4hler",description:"Zeigt in Seitenleiste die Zahl der heute absolvierten Eins\xe4tze. Funktion in Statistics LST enthalten!",helpLink:"",version:"outdatet",author:"NiZi112",settingsTarget:"einsatzzaehler",target:"einsatzzeahlerCheck",keywords:["Einsatz","Zahl","Z\xe4hler","z\xe4hlen","Einsatze","z\xe4hlen"],allSite:!1,async func(b){let a=new Date().getDate();localStorage.getItem("finished_missions_nizi")&&localStorage.getItem("finished_missions_nizi_time")||(localStorage.setItem("finished_missions_nizi","0"),localStorage.setItem("finished_missions_nizi_time",a)),localStorage.getItem("finished_missions_nizi_time")!=a&&(localStorage.setItem("finished_missions_nizi","0"),localStorage.setItem("finished_missions_nizi_time",a)),$("#darkMode").after(`<li id="finishedMissionsToday">Eins\xe4tze heute: ${localStorage.getItem("finished_missions_nizi")}</li>`),socket.on("finishMission",()=>{let a=ControlCenter.missions[e];if(a&&(!a.isShared||a.ownParticipation)){var b=parseInt(localStorage.getItem("finished_missions_nizi"));b++,localStorage.setItem("finished_missions_nizi",b),$("#finishedMissionsToday").html(`Eins\xe4tze heute: ${localStorage.getItem("finished_missions_nizi")}`)}})},hasSettings:!1,settings:[]},{name:"Push FMS5",description:"Sendet eine Brwoserbenachrichtigung bei einem Sprechwunsch.",helpLink:"",version:"1.0.0",author:"NiZi112",settingsTarget:"pushFMS",target:"pushFMSChack",keywords:["Browserbenachrichtigung","Browser","Push","Ping","PushFMS","FMS","Status","5","Sprechwunsch"],allSite:!1,async func(a){await h()&&socket.on("vehicleFMS",a=>{a.userVehicleFMS,`${a.userVehicleFMS}`.includes("5")&&new Notification("Sprechwunsch!",{body:`Dein Fahrzueg ${a.userVehicleName} im Rettungssimulator hat einen Sprechwunsch!`})})},hasSettings:!1,settings:[]},{name:"Darkmode nach Uhrzeit (noch nicht verf\xfcgbar)",description:"Wechselt automatisch in den White- / Darkmode bei von euch bestimmter Einstellung",helpLink:"",version:"1.0.0",author:"NiZi112",settingsTarget:"zeitwechsel",target:"darkModeCheck",keywords:["Darkmode","Uhrzeit","automatisch"],allSite:!0,async func(a){console.log("Ich z\xe4hle die Topliste")},hasSettings:!0,settings:[{subtarget:"darkmodeSettings",target:"uhrMin",name:"Darkmode um ... Uhr ausschlaten",type:"input-number",settingsKey:"min",preset:"ZAHL",default:7},{subtarget:"darkmodeSettings",target:"uhrMax",name:"Darkmode um ... Uhr einschalten",type:"input-number",settingsKey:"max",preset:"ZAHL",default:19}]},{name:"Uhr",description:"Zeigt in der Navbar eine kleine Uhr.",helpLink:"",version:"1.0.0",author:"NiZi112",settingsTarget:"uhr",target:"uhrCheck",keywords:["Uhr","Zeit","Uhrzeit","Navbar"],allSite:!1,async func(a){document.createElement("div"),$(".brand:first").after('<div id="clock"></div>'),setInterval(function(){var b=new Date,c=b.getHours(),a=b.getMinutes();a<10&&(a=`0${a}`),$("#clock").html(`${c}:${a} <i class='far fa-clock'></i>`)},50)},hasSettings:!1,settings:[]},{name:"Settings in der Navbar",description:"Die Codebase-Einstellungen lassen sich so auch direkt \xfcber die Navbar aufrufen.",helpLink:"",version:"1.0.0",author:"NiZi112",settingsTarget:"settings",target:"settingsCheck",keywords:["schnell","Zugriff","Einstellungen","Navbar"],allSite:!1,async func(a){$(".brand").after('<span class="openCodebaseSettings"><i class="fas fa-cogs codebase" focusable="false" data-tooltip="ReSi-Codebase-Einstellungen"></i></span>'),$(".openCodebaseSettings").on("click",()=>{$("#Codebase").click()})},hasSettings:!1,settings:[]},{name:"Chat-Count",description:"Z\xe4hlt die Zeichen im Chat.",helpLink:"",version:"1.0.0",author:"NiZi112",settingsTarget:"chatCount",target:"chatCountCheck",keywords:["Chat","z\xe4hlen","Zeichen","maximale","Zeichen","Zeichen","z\xe4hlen"],allSite:!1,async func(b){let a=$("#new-chat-jump-to"),c=a.html();$("#chatInput").on("keyup focus",()=>{var b;a.html(c+'&nbsp;<span class="label label-success" id="chracktarsChatCount" style="width: 12%">000</span>'),showJumpToNewChat(),(b=$("#chatInput").val().length)<10?b="00"+b:b<100&&(b="0"+b),$("#chracktarsChatCount").html(b),b>500?($("#chracktarsChatCount").addClass("label-danger"),$("#chracktarsChatCount").removeClass("label-success")):($("#chracktarsChatCount").addClass("label-success"),$("#chracktarsChatCount").removeClass("label-danger"))}),$("#chatInput").on("focusout submit",()=>{a.html(c),hideJumpToNewChat()})},hasSettings:!1,settings:[]},{name:"AlertChat",description:"Sendet kleine Popups bei einer Chatnachricht.",helpLink:"",version:"1.0.0",author:"NiZi112",settingsTarget:"alertChat",target:"alertChatCount",keywords:["Popup","Sytemnachricht","Nachricht","Benachrichtgung"],allSite:!1,async func(a){socket.on("associationMessage",a=>{a.message&&a.userName!=ReSi.userName&&systemMessage({title:`${a.userName}`,message:`${a.message}`,type:"info"})})},hasSettings:!1,settings:[]},{name:"FilterKH",description:"Filtert die Krankenh\xe4user in einem Sprechwunsch.",helpLink:"",version:"1.0.0",author:"NiZi112",settingsTarget:"filterKH",target:"filterKHCheck",keywords:["Filter","Krankenh\xe4user","Sprechwunsch","FMS5","S5"],allSite:!0,async func(a){if($(".s5").length>0&&location.pathname.includes("vehicle")){var c=a.filterKHSettings.maxDistanceKH,d=a.filterKHSettings.ownKH,e=a.filterKHSettings.alliKH,b=a.filterKHActive;$(".card:first").after("<button class='button button-round button-danger' id='changeFilterKHMode'>Filter aktivieren</button>"),a.filterKHSettings&&a.filterKHSettings.showPatientsInfo&&$(".card:first").hide(),a.filterKHSettings&&a.filterKHSettings.hidePatientsRelease&&$("#releasePatient").hide(),$("#changeFilterKHMode").on("click",function(){$("#changeFilterKHMode").hasClass("button-danger")?(function(){for(var a=1;a<$(".box-progress").length+1;a++)if($("#releasePatient")!==$(".box-progress").eq(a)){var b=1+2*a-1;parseInt($(".box-text").eq(b).text().replace(" km",""))<c?$(".box-progress").eq(a).html().includes('<span class="label label-info label-round text-small">')?e?$(".box-progress").eq(a).show():$(".box-progress").eq(a).hide():d?$(".box-progress").eq(a).show():$(".box-progress").eq(a).hide():$(".box-progress").eq(a).hide()}}(),$("#changeFilterKHMode").removeClass("button-danger").addClass("button-success").text("Filter aktiviert"),a.filterKHActive=!0):($(".box-progress").show(),a.filterKHSettings&&a.filterKHSettings.hidePatientsRelease&&$("#releasePatient").hide(),$("#changeFilterKHMode").removeClass("button-sucsess").addClass("button-danger").text("Filter deaktiviert"),a.filterKHActive=!1),localStorage.storage_resi_base=JSON.stringify(a)}),b&&$("#changeFilterKHMode").click()}},hasSettings:!0,settings:[{subtarget:"filterKHSettings",target:"ownKH",name:"Eigene Krankenh\xe4user anzeigen",type:"checkbox",settingsKey:"ownKH",preset:"CHECKBOX",default:!0},{subtarget:"filterKHSettings",target:"alliKH",name:"Verbandskrankenh\xe4user anzeigen",type:"checkbox",settingsKey:"alliKH",preset:"CHECKBOX",default:!0},{subtarget:"filterKHSettings",target:"maxDistanceKH",name:"Maximale Entfernung der Krankenh\xe4user",type:"input-number",settingsKey:"maxDistanceKH",preset:"ZAHL",default:20},{subtarget:"filterKHSettings",target:"showPatientsInfoCheck",name:"Patienteninformationen verstecken",type:"checkbox",settingsKey:"showPatientsInfo",preset:"CHECKBOX",default:!1},{subtarget:"filterKHSettings",target:"hidePatientsReleaseCheck",name:'"Patienten entlassen" verstecken',type:"checkbox",settingsKey:"hidePatientsRelease",preset:"CHECKBOX",default:!1}]},{name:"Alarmansichtswechsler",description:'Wechselt im Einsatz mit der Taste "U" zwischen der Wachen- und Fahrzeugansicht.',settingsTarget:"switchAlarmingMode",helpLink:"",version:"1.0.0",author:"NiZi112",target:"switchAlarmingModeCheck",async func(a){location.pathname.includes("/mission/")&&$(document).on("keyup",a=>{85==a.keyCode&&$(".detail-right .button-gray").click()})},keywords:["Switch","Einsatz","Mission","Wachenansicht","wechseln","Fahrzeugansicht"],hasSettings:!1,allSite:!0,settings:[]},{name:"Einsatzstatistiken",description:"Zeigt in der Einsatzliste, wie viele Eins\xe4tze in welchem Status (rot, gelb, gr\xfcn) ihr aktuell offen habt und wie viel Prozent von euren gesamten Eins\xf6tzen dieser Anteil ausmacht.",settingsTarget:"missionStatistics",helpLink:"",version:"1.0.0",author:"NiZi112",target:"statisticsCheck",async func(c){var a,d=0,e=0,f=0,g=0,h=0,i=0;function b(){d=$(".mission-list-progress-1").length,e=$(".mission-list-progress-2").length,f=$(".mission-list-progress-3").length,aRed=$("#sharedMissions .mission-list-progress-1").length,aYellow=$("#sharedMissions .mission-list-progress-2").length,aGreen=$("#sharedMissions .mission-list-progress-3").length,oRed=$("#ownMissions .mission-list-progress-1").length,oYellow=$("#ownMissions .mission-list-progress-2").length,oGreen=$("#ownMissions .mission-list-progress-3").length;var b=d+e+f;g=Math.floor(d/b*100),h=Math.floor(e/b*100),i=Math.floor(f/b*100),isNaN(g)&&(g=0),isNaN(h)&&(h=0),isNaN(i)&&(i=0),a=`Rot: ${d} (${g}%, eigene: ${oRed}, shared: ${aRed}),<br>Gelb: ${e} (${h}%, eigene: ${oYellow}, shared: ${aYellow}),<br>Gr\xfcn: ${f} (${i}%, eigene: ${oGreen}, shared: ${aGreen})`,$("#missionPercent").attr("data-tooltip",a)}b(),$("#mission-detail").length||$("#missions .panel-headline").prepend('<div><span id="mission-detail"><span class="fa-solid fa-sliders"></span>:</span></div>'),$("#mission-detail").append(` <span class="fas fa-info-circle nizi112" id="missionPercent" data-tooltip="${a}"></span>`),socket.on("missionStatus",()=>{b()}),socket.on("finishMission",()=>{b()})},keywords:["Statistiken","Einsatz","Mission","Status","Eins\xe4tze","Info"],hasSettings:!1,allSite:!1,settings:[]},{name:"ShowNAChance",description:"Zeigt im Einsatz mit Patienten die Chance der Grundvarinate, dass ein Notazt gebraucht wird.",settingsTarget:"ShowNAChance",helpLink:"",version:"1.0.0",author:"NiZi112",target:"ShowNAChanceCheck",async func(a){location.pathname.includes("/mission/")&&((await getAPI("missions"))[parseInt($(".detail-title").attr("missionid"))],data.patients&&$("#s5").after(`<span class='label label-info'>Grundvariante: ${data.patients.min}-${data.patients.max} Patienten, ${data.patients.naChance}% NA-Wahrscheinlichkeit`))},keywords:["Notarzt","Einsatz","Mission","Wahrscheinlichkeit","Eins\xe4tze","Info"],hasSettings:!1,allSite:!1,settings:[]},{name:"M\xfcnzendifferenz",description:"Auf dem Nutzerprofil eines anderen Nutzer sehr ihr, wie viele M\xfcnzen mehr / wneiger dieser Nutzer hat.",settingsTarget:"differentToAnotherUser",helpLink:"",version:"1.0.0",author:"NiZi112",target:"differentToAnotherUserCheck",async func(d){if(!location.pathname.includes("/profile/"))return;let c=await getAPI("user");var b,a=parseInt($(".detail-subtitle b").eq(2).text().replaceAll(".",""))-c.muenzenTotal;b=a<0,a=Math.abs(a),$(".detail-subtitle").eq(1).after(`<i class="fas fa-arrows-alt-v"></i> Differenz: <b>${a.toLocaleString()}</b> M\xfcnzen ${b?"weniger als Du":"mehr als Du"}<br>`)},keywords:["Profil","Nutzerprofil","M\xfcnzendifferenz","Gesamtm\xfcnzen","M\xfcnzen","Info"],hasSettings:!1,allSite:!0,settings:[]},{name:"DistanceVehicle",description:"Filtert die Fahrzeuge im Einsatz, die weiter als x Kilometer entfernt sind.",settingsTarget:"vehicleDistance",helpLink:"",version:"1.0.0",author:"NiZi112",target:"distaceVehicleCheck",async func(a){if(location.pathname.includes("/mission/")){var b=10;a.distaceVehicle&&(b=a.distaceVehicle.distance),a.filterKMActualActive?c(parseInt(b)?parseInt(b):10):c(1e6),$(".enroute:first").before(`<button class="button button-round button-${a.filterKMActualActive?"success":"danger"}" id="toggleVehicleFilter">Fahrzeuge ${a.filterKMActualActive?"nicht ":""}filtern</button>`),$("#toggleVehicleFilter").on("click",()=>{a.filterKMActualActive=!a.filterKMActualActive,localStorage.storage_resi_base=JSON.stringify(a),a.filterKMActualActive?(c(parseInt(b)?parseInt(b):10),$("#toggleVehicleFilter").html("Fahrzeuge nicht filtern").removeClass("button-danger").addClass("button-success")):(c(1e6),$("#toggleVehicleFilter").html("Fahrzeuge filtern").removeClass("button-success").addClass("button-danger"))})}function c(d){let c=document.querySelectorAll(".mission-vehicle"),e=document.querySelectorAll(".vehicle-distance");for(var b=0;b<c.length;b++){var a=c[b];parseFloat(e[b].innerText.replace("~",""))>d?(a.classList.remove("vehicle"),a.style.display="none"):a.classList.contains("vehicle")||(a.classList.add("vehicle"),a.style.display="")}updateAAOButtons()}},keywords:["Einsatz","Mission","Fahrzueg","Eins\xe4tze","Fahrzeuge","AAO"],hasSettings:!0,allSite:!0,settings:[{subtarget:"distaceVehicle",target:"distaceVehicleDistaceInput",name:"Entfernung",type:"input-number",settingsKey:"distance",preset:"ZAHL",default:20}]},{name:"TitleChange",description:"Stellt einen individuellen Webseitentitel ein, welcher oben im Browsertab angezeigt wird.",settingsTarget:"titleChange",helpLink:"",version:"1.0.0",author:"NiZi112",target:"titleChangeCheck",async func(a){document.title=a.titleChangeSettings&&a.titleChangeSettings.title?a.titleChangeSettings.title:"rettungssimulator.online"},keywords:["Title","Titel","Browser","ReSi","Webseite","Info"],hasSettings:!0,allSite:!0,settings:[{subtarget:"titleChangeSettings",target:"titleChangeInput",name:"Titel",type:"input-text",settingsKey:"title",preset:"TEXT",default:"rettungssimulator.online"}]},{name:"AlertFMS5",description:"Sobald ein Fahrzeug einen Sprechwunsch hat, wird euch das per Mitteilungsbox angezeigt.",settingsTarget:"alertFMS5",helpLink:"",version:"1.0.0",author:"NiZi112",target:"alertFMS5Check",async func(a){try{socket.on("vehicleFMS",a=>{5==a.userVehicleFMS&&(null==a.userName||a.userName==ReSi.userName)&&modal("Sprechwunsch",`${a.userVehicleName} hat einen Sprechwunsch`,"\xf6ffnen","schlie\xdfen",()=>{43==a.vehicleID?openFrame(`/vehicle/${a.userVehicleID}`,"1/2/4/4"):openFrame(`/mission/${a.userMissionID}`,"1/1/4/5")})})}catch(b){console.error("socket not found")}},keywords:["FMS","FMS5","Sprechwunsch","Benachrichtigung","Popup","Alert","Info"],hasSettings:!1,allSite:!0,settings:[]},{name:"StatisticsLST",description:"Dieses Modul zeit euch in eurer Leitstelle Fahrzeug- sowie Geb\xe4udestatistiken. Weiter gibt es Statistiken zu den heute verdienten M\xfcnzen, absolvierten Eins\xe4tzen und transportierten Patienten.",settingsTarget:"statisticsLST",helpLink:"",version:"1.0.0",author:"NiZi112",target:"statisticsLSTCheck",async func(i){if(localStorage.counterConfig||(localStorage.counterConfig=JSON.stringify({dayReset:new Date().getDate(),yearReset:new Date().getFullYear(),missionsToday:0,missionsYear:0,moneyToday:0,moneyYear:0,patientsToday:0,patientsYear:0})),$("#tab_controlCenter_stats").length&&location.pathname.includes("/department/")){var c=JSON.parse(localStorage.counterConfig);let f=await getAPI("userVehicles"),a=await getAPI("vehicleCategories");for(var b in f)for(var d in a)a[d].count||(a[d].count=0),a[d].ids.includes(f[b].vehicleID)&& ++a[d].count;let g=await getAPI("userBuildings"),h=await getAPI("buildings");g.forEach(a=>{h[a.buildingType-1].count||(h[a.buildingType-1].count=0),h[a.buildingType-1].count++});var e='<table class="table-divider striped"><thead><tr><th><u>Wachentyp</u></th><th><u>Anzahl</u></th></tr></thead></tbody>';for(b in h.forEach(a=>{e+=`<tr><td>${a.buildingName}</td><td>${a.count?a.count:0}</td></tr>`}),e+="</tbody><thead><tr><th><u>Fahrzeugtyp</u></th><th><u>Anzahl</u></th></tr></thead></tbody>",a)a[b].ids.length&&!(a[b].ids[0]>1e4)&&(e+=`
						<tr><td>${a[b].name}</td><td>${a[b].count?a[b].count:0}</td></tr>`);e+=`</tbody><thead><tr><th><u>Typ</u></th><th><u>Anzahl</u></th></tr></thead><tbody><tr><td>Eins\xe4tze heute</td><td>${c.missionsToday.toLocaleString()}</td></tr><tr><td>Eins\xe4tze dieses Jahr</td><td>${c.missionsYear.toLocaleString()}</td></tr><tr><td>Patienten heute</td><td>${c.patientsToday.toLocaleString()}</td></tr><tr><td>Patienten dieses Jahr</td><td>${c.patientsYear.toLocaleString()}</td></tr><tr><td>M\xfcnzen heute</td><td>${c.moneyToday.toLocaleString()}</td></tr><tr><td>M\xfcnzen dieses Jahr</td><td>${c.moneyYear.toLocaleString()}</td></tr></tbody></table>`,$("#tab_controlCenter_stats").append(e),$("#tab_controlCenter_stats").find(".label").css("text-decoration","line-through")}if("/"==location.pathname){let j=JSON.parse(localStorage.counterConfig);function k(a,b=1){if(j.yearReset!=new Date().getFullYear()){for(c in j)c.includes("Year")||(j[c]=0);j.yearReset=new Date().getFullYear(),j.dayReset=new Date().getDate()}if(j.dayReset!=new Date().getDate()){for(var c in j)c.includes("Year")||(j[c]=0);j.dayReset=new Date().getDate()}if(a)switch(a){case"patients":j.patientsToday++,j.patientsYear++;break;case"money":j.moneyToday+=b,j.moneyYear+=b;break;case"missions":j.missionsToday++,j.missionsYear++;break;default:console.error(`Unknown config type "${a}" => changeConfig@Statistics LST (V${GM_info.script.version})`)}localStorage.counterConfig=JSON.stringify(j)}socket.on("patientStatus",async a=>{"error"!=(a.treatmentUserVehicleID!=NULL&&await getAPI(`userVehicles?id=${a.treatmentUserVehicleID}`)).status&&"error"!=(a.transportUserVehicleID!=NULL&&await getAPI(`userVehicles?id=${a.transportUserVehicleID}`)).status&&4!=a.userPatientStatus&&k("patients")});var l=parseInt($(".muenzen:first").text().replaceAll(".",""));socket.on("muenzenUpdate",a=>{a=parseInt(a.toString().replaceAll(".","")),l=parseInt(l.toString().replaceAll(".","")),a>l&&k("money",a-l),l=a}),socket.on("finishMission",b=>{let a=ControlCenter.missions[b];a&&(!a.isShared||a.ownParticipation)&&k("missions")})}},keywords:["LST","Leitstelle","Statistiken","\xdcbersicht","Fahrzeuge","Geb\xe4ude","Info"],hasSettings:!1,allSite:!0,settings:[]},{name:"CollapseCards in Association",description:"Die Karten auf der Verbandsseite bei den Mitgliedern lassen sich zusammenklappen.",settingsTarget:"collapseCardsAssociation",helpLink:"",version:"1.0.0",author:"NiZi112",target:"collapseCardsAssociationCheck",async func(a){if(!location.href.includes("/association/"))return;let b=a.collapseCardsAssociation.autoCollapseCards;$('.card-headline:contains("Verbandsleitung")').html($('.card-headline:contains("Verbandsleitung")').html()+'<i class="fas fa-angle-up pointer right card-collapse-toggle"></i>').parent().addClass(`card-collapse${b?" collapsed":""}`)},keywords:["Verband","Association","Cards","Collapse","automatisch","\xfcbersichtlich"],hasSettings:!0,allSite:!0,settings:[{subtarget:"collapseCardsAssociation",target:"autoCollapseCards",name:"Automatisches zusammenklappen",type:"checkbox",settingsKey:"autoCollapseCards",preset:"CHECKBOX",default:!1}]},{name:"HideDevelopedStepsAtRoadmap",description:"Blendet bereits entwickelte Schritte auf der Roadmap aus.",settingsTarget:"hideDevelopedStepsAtRoadmap",helpLink:"",version:"1.0.0",author:"NiZi112",target:"hideDevelopedStepsAtRoadmapCheck",async func(a){location.href.includes("/roadmap")&&$(".label-success").parent().parent().parent().hide().next().hide()},keywords:["Roadmap","neu","fertig","ausblenden","Filter","verstecken"],hasSettings:!1,allSite:!0,settings:[]},{name:"HideDeletedMessagesInChat",description:"Blendet gel\xf6schte Chatnachrichten aus.",settingsTarget:"hideDeletedMessagesInChat",helpLink:"",version:"1.0.0",author:"NiZi112",target:"hideDeletedMessagesInChatCheck",async func(b){function a(){$(".message-deleted").remove()}socket.on("associationMessageDelete",b=>{a()}),a()},keywords:["Chat","Nachrichten","gel\xf6scht","ausblenden","Filter","verstecken"],hasSettings:!1,allSite:!1,settings:[]},{name:"searchInMissionOverview",description:"F\xfcgt eine Suche zur Einsatz\xfcbersicht hinzu.",settingsTarget:"searchInMissionOverview",version:"1.0.0",author:"NiZi112",target:"searchInMissionOverviewCheck",async func(a){if(!location.pathname.includes("/missionOverview"))return;$(".detail-subtitle:first").append('<div class="input-container right"><input class="input-round input-inline nochange" type="text" value="" style="padding-left:10px;" id="input_search" placeholder="Suche..." autocomplete="off"></div>'),$(".detail-header").after("<h4 class='label label-info searchNoResult hidden'>Die Suche lieferte keine Ergebnisse! Bitte probiere es mit einem anderen Suchwort!</h4>"),$("head").append("<style>.searchHidden { display: none !important };</style>");let b="table tbody tr";$("#input_search").on("input change keyup",function(){var d=document.querySelector("#input_search").value.toLowerCase();if(""==d){document.querySelectorAll(b).forEach(a=>{a.classList.remove("searchHidden"),document.querySelector(".searchNoResult").classList.add("hidden")});return}let c=document.querySelectorAll(b);for(var a=0;a<document.querySelectorAll(b).length;a++)c[a].querySelectorAll("td")[1].innerText.toLowerCase().includes(d)||c[a].querySelectorAll("td")[1].innerText.toLowerCase().includes(d)?(c[a].classList.remove("searchHidden"),document.querySelector(".searchNoResult").classList.add("hidden")):c[a].classList.add("searchHidden");c.length==document.querySelectorAll(".searchHidden td").length&&document.querySelector(".searchNoResult").classList.remove("hidden")})},keywords:["Suche","Serach","Mission","Overview","\xdcbersicht","Einsatz","Mission","Einsatz\xfcbersicht"],hasSettings:!1,allSite:!0,settings:[]}];function a(){let a={};return b.forEach(b=>{a[b.settingsTarget]=!1,b.hasSettings&&b.settings.forEach(b=>{b.subtarget&&!a[b.subtarget]&&(a[b.subtarget]={}),b.subtarget?a[b.subtarget][b.settingsKey]=b.default:a[b.settingsKey]=b.default})}),a}localStorage.storage_resi_base||(localStorage.setItem("storage_resi_base",JSON.stringify(a())),localStorage.setItem("resiBaseRemovedStorage","1.5.1"),systemMessage({title:"Willkommen bei der ReSi-Codebase!",message:`Sch\xf6n, dass Du dich entschlossen hast, die ReSi-Codebase zu nutzen!<br><br>
Du kannst jeden Modul einzeln aktivieren, die M\xf6glichkeit findest Du in einem Einstellungs-Panel, welches Du \xfcber die Seitenleiste aufrufen kannst.<br>
Probier doch einfach mal alle Module aus. Wenn Du nicht wei\xdft, was ein Modul tut, dann klick einfach auf das [?] hinter dem Namen, damit kommst Du zur Wikiseite des Moduls.<br><br>
Fehler bitte im Forum melden - oder im Thread ReSi-Codebase auf Discord im Bereich <code>#skripting</code><br><br>
Gerne kannst du auch unserem Discord-Server beitreten: <a href="https://discord.gg/8FyA6HBbXs" target="_blank" class="no-prevent">discord.gg/8FyA6HBbXs</a><br><br>
Viel Spa\xdf,<br>
Dein Team der ReSi-Codebase`,type:"info"})),"1.5.1"!=localStorage.resiBaseRemovedStorage&&(localStorage.storage_resi_base=JSON.stringify(a()),localStorage.resiBaseRemovedStorage="1.5.1"),"[object Object]"==localStorage.storage_resi_base&&(systemMessage({title:"Fehler in den Codebase-Einstellungen",message:`Es gab einen Fehler in den Codebase-Einstellungen, die Einstellungen wurden zur\xfcckgesetzt.`,type:"danger"}),localStorage.storage_resi_base=JSON.stringify(a()));let i=JSON.parse(localStorage.storage_resi_base);class e{constructor(){this.version=GM_info.script.version,this.settings=i}getSettings(){return this.settings}getVersion(){return this.version}}function f(){localStorage.storage_resi_base||reload(),b.forEach(a=>{a.hasSettings&&a.settings.forEach(a=>{a.subtarget&&!i[a.subtarget]&&(i[a.subtarget]={})})})}if(f(),codebase=new e,$("#darkMode").after("<li id='Codebase'>ReSi-Codebase</li>"),$("#Codebase").on("click",async()=>{openFrame("","1/1/4/5");let c=$("#iframe");c.on("load",async()=>{var d=`<div class='panel-body'>
<script src='https://rettungssimulator.online/js/jquery-3.5.0.min.js?v=${ReSi.resiVersion}'></script>
<link rel='stylesheet' href='https://rettungssimulator.online/css/index.css?v=${ReSi.resiVersion}' charset='utf-8'>
<script src='https://rettungssimulator.online/js/index.js?v=${ReSi.resiVersion}'></script>
<script src='https://rettungssimulator.online/js/iframe.js?v=${ReSi.resiVersion}'></script>
<script src='https://rettungssimulator.online/js/controlCenter.js?v=${ReSi.resiVersion}'></script>
<script src="https://rettungssimulator.online/js/popper.js?v=${ReSi.resiVersion}" charset="utf-8"></script>
<script src='https://rettungssimulator.online/js/tippy.js?v=${ReSi.resiVersion}'></script>
<style>
.searchHidden{
display: none;
};
</style>
<script>
if(localStorage.darkmode_resi_base=='true') {
$('body').addClass('dark');
}
let changes = false;
$('.checkbox-container, .input-round').on('click keydown', () => {
if(!$(this).hasClass('nochange')){
changes = true;
}
})
let valide = value => value.replaceAll('>', '').replaceAll('<', '');
$('body').on('keyup', (e) => {
if(e.keyCode === 27) $(".right:first").click();
});
$('.open-profile').on('click', (e) => {
let author = $(e.currentTarget).attr('profile');
e.preventDefault()
if(changes) modal('Profil des Autors aufrufen?', 'Willst du das Profil von '+author+' aufrufen? Du hast ungespeicherte Optionen in den Einstellungen. Diese gehen verloren, wenn du das profil des Autors aufrufst.', 'Aufrufen', 'Hier bleiben', () => {
location.href = '/profile/'+author;
}, () => {});
else location.href = '/profile/'+author;
});
function search(){
var searchWord = $('#input_search').val().toLowerCase();
if(searchWord == ''){
$('.searchable').removeClass('searchHidden');
$('.searchNoResult').addClass('hidden');
return;
}
for(var j = 0; j <= $('.searchable').length; j++){
if($('.searchable').eq(j).text().toLowerCase().includes(searchWord)){
$('.searchable').eq(j).removeClass('searchHidden');
$('.searchNoResult').addClass('hidden');
}else{
$('.searchable').eq(j).addClass('searchHidden');
}
}
if($('.searchable').length == $('.searchHidden').length){
$('.searchNoResult').removeClass('hidden');
}
};
$('#input_search').on('input change keyup', search);
</script>
<div class='detail-header'>
<div class='detail-title'>ReSi-Codebase <div class='right pointer' onclick='if(changes === true){modal("Ohne Speichern verlassen?","Du hast \xc4nderungen vorgenommen, willst du diese Seichern?","Speichern","Ohne speichern verlassen",() => {$("#saveCodebaseSettings").click()}, () => {parent.closeFrame()})}else{parent.closeFrame()}'> &times; </div><div class='right pointer share' data-tooltip='Die ReSi-Codebase weiterempfehlen' share-url='https://forum.rettungssimulator.online/index.php?thread/1423-resi-codebase-v1-5/&action=firstNew'>&hookrightarrow;</div></div>
<div class='detail-subtitle'>Verwalte hier deine Einstellungen f\xfcr die ReSi-Codebase
<button class="button button-round button-success" id="showStorage">Gespeicherte Daten der Scripte anzeigen</button>
<button id="exportSettings" class="button button-round button-success">Einstellungen exportieren</button>
<button id="importSettings" class="button button-round button-success">Einstellungen importieren</button>
<button id="resetStorage" class="button button-round button-success">Einstellungen zur\xfccksetzen</button>
<div class="input-container nochange" style="float:right"><label for='input_search'>Suche</label>
<input class="input-round input-inline nochange" type="text" value="" style="padding-left:20px;padding-right:20px;" id="input_search" placeholder="Suche..." autocomplete="off">
</div>
</div>
</div>
<div class='tabs tabs-horizotal'>
<div class='tab tab-active' for='settings-moduls'>Module</div>
<div class='tab' for='licence'>Sonstiges & Lizenzen</div>
</div>
<div class='tab-container'>
<div class='tab-content tab-content-active' id='tab_settings-moduls'>
<h2>Module:</h2>
<h4 class='label label-info searchNoResult hidden'>Die Suche lieferte keine Ergebnisse! Bitte probiere es mit einem anderen Suchwort!</h4>`;function e(){c.contents().find("html").html(""),closeFrameOrig(),e=closeFrameOrig}function h(){f(),b.forEach(a=>{i[a.settingsTarget]=$("#iframe").contents().find(`#${a.target}`).prop("checked"),a.hasSettings&&a.settings.forEach(b=>{switch(b.type){case"checkbox":b.subtarget?i[b.subtarget][b.settingsKey]=$("#iframe").contents().find(`#${b.target}`).prop("checked"):i[b.settingsKey]=$("#iframe").contents().find(`#${b.target}`).prop("checked");break;case"input-text":b.subtarget?g(i[b.subtarget][b.settingsKey]=$("#iframe").contents().find(`#${b.target}`).val()):g(i[b.settingsKey]=$("#iframe").contents().find(`#${b.target}`).val());break;case"input-number":b.subtarget?i[b.subtarget][b.settingsKey]=parseFloat($("#iframe").contents().find(`#${b.target}`).val()):i[b.settingsKey]=parseFloat($("#iframe").contents().find(`#${b.target}`).val());break;default:console.error(`Can't save setting ${b.name} @ ${a.name} with target ${a.target} to storage @ subcategory ${b.subtarget} and category ${b.settingsKey} with type ${b.type}`)}})}),localStorage.storage_resi_base=JSON.stringify(i),reload()}b.forEach(a=>{d+=`<div class='checkbox-container searchable'><input id='${a.target}' type='checkbox' ${i[a.settingsTarget]?"checked":""}><label for='${a.target}'>${a.name} aktivieren<a class='no-prevent' href='${a.helpLink}' target='_blank' data-tooltip='${a.description} Mehr im Hilfeartikel!'> [?]</a> ${a.hasSettings?'<span data-tooltip="Dieses Modul hat Einstellungen! Passe es dir nach deinem Geschmack an!">[!]</span>':""} <span class="label label-success">von: ${'<span class="open-profile pointer" profile="'+a.author+'" frame="1/2/4/4">'+a.author+"</span>"}</span> <span class="label label-success">V${a.version}</span></label><div class='hidden keyword-serach'>${a.keywords.join(" ")}</div></div>`,a.hasSettings&&(d+=`<div class="searchable card card-collapse${i[a.settingsTarget]?"":" collapsed"}" style="padding-left:100px;">
<div class="card-headline card-headline-danger">
Einstellungen zu ${a.name}
<div class="card-tools">
<span class="card-collapse-toggle pointer" style="font-size:15px;overflow:hidden;vertical-algin:middle">${i[a.settingsTarget]?"&darr;":"&uarr;"}</span>
</div>
</div>
<div class="card-body">`,a.settings.forEach(b=>{var c=b.subtarget?i[b.subtarget][b.settingsKey]:i[b.settingsKey];switch(b.type){case"checkbox":d+=`<div class='checkbox-container'><input id='${b.target}' ${c?"checked":""} type='checkbox'><label for='${b.target}'>${b.name} (${b.preset})<a class='no-prevent' href='${a.helpLink}' target='_blank' data-tooltip='${a.description} Mehr im Hilfeartikel!'> [?]</a></label></div>`;break;case"input-text":d+=`<div class='input-container'><div class='input-label'>${b.name} (${b.preset})<a class='no-prevent' href='${a.helpLink}' target='_blank' data-tooltip='${a.description} Mehr im Hilfeartikel!'> [?]</a></div><div class='input-icon'></div><input class='input-round' value='${c||""}' autocomplete='off' id='${b.target}' placeholder='${b.preset}'></div>`;break;case"input-number":d+=`<div class='input-container'><div class='input-label'>${b.name} (${b.preset})<a class='no-prevent' href='${a.helpLink}' target='_blank' data-tooltip='${a.description} Mehr im Hilfeartikel!'> [?]</a></div><div class='input-icon'></div><input class='input-round' type='number' value='${c||""}' autocomplete='off' id='${b.target}' placeholder='${b.preset}'></div>`;break;default:d+=`<div class='alert alert-info'>Unbekannte Einstellungsm\xf6glichkeit ${b.type} @ ${a.name}</div>`}}),d+="</div></div>")}),d+=`<button class='button-success button button-round' id='saveCodebaseSettings'>Speichern</button>
</div>
<div class='tab-content' id='tab_licence'>
<h2>Fehler melden:</h2>
<p>
<a href="https://discord.gg/8FyA6HBbXs" target="_blank" class="no-prevent button button-round button-success">Discord-Server</a> - <a href='https://github.com/Notme112/Codebase/issues/new/choose' class='no-prevent button button-success button-round' target='_blank'>Github</a> - <a href='https://forum.rettungssimulator.online/index.php?thread/1423-resi-codebase-v1-0/&action=lastPost' class='no-prevent button button-success button-round' target='_blank'>Forum</a> - ReSi-Discord: im Thread ReSi-Codebase im Bereich <code>#skripting</code>
<h3>Vielen Danke f\xfcr deine Mithilfe!</h3>
</p>
<h2>Open-Source:</h2>
<p>
Icons:
Icons by <a href='https://fontawesome.com/' target='_blank' class='no-prevent'><u>Fontawesome</u></a> unter <a href='https://creativecommons.org/licenses/by/4.0/' target='_blank'><u>CC-BY 4.0-Lizenz</u></a>.
</p>
<p>
JQuery:
Copyright (c) 2021 OpenJS Foundation and other contributors, https://openjsf.org/, <br>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the 'Software'), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
<br>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.<br>
THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
</p>
</div>
</div>
<center>Joine unserem Discord-Server: <a href="https://discord.gg/8FyA6HBbXs" target="_blank" class="no-prevent">discord.gg/8FyA6HBbXs</a><br><br></center>
<h3>Danke f\xfcr die Nutzung der ReSi-Codebase!</h3>
</div>`,c.contents().find("body").html(""),c.contents().find("body").append(d),closeFrameOrig=e,c.contents().find("#showStorage").on("click",async()=>{for(var c='<table class="table-divider striped"><thead><tr><th>Key</th><th>Wert</th></tr><tbody>',b=0;b<localStorage.length;b++)key=localStorage.key(b),c+=`<tr><td>${key}</td><td>${localStorage[key]}</td><td onclick='localStorage.removeItem("${key}");$(this).parent().remove()'>l\xf6schen</td></tr>`;for(var d='<table class="table-divider striped"><thead><tr><th>Session-Storage: Key</th><th>Value</th></tr><tbody>',b=0;b<sessionStorage.length;b++)key=sessionStorage.key(b),d+=`<tr><td>${key}</td><td>${sessionStorage[key]}</td><td onclick='sessionStorage.removeItem("${key}");$(this).parent().remove()'>l\xf6schen</td></tr>`;c+="</tbody></table>",d+="</tbody></table>",(tableModal=()=>noticeModal("Gescheicherte Daten",`Hier siehst du, welche Daten im sog. local- & session-Storage gespeichert wurden. Davon ausgenommen sind sog. indexDB und Cookies<div style="height: 200px;overflow:auto">${c}${d}</div><div>Session-Storage l\xf6schen: <button class="button button-round button-danger deleteSessionStorage">Daten unwiederruflich l\xf6schen</button></div><div>Local-Storage l\xf6schen: <button class="button button-round button-danger deleteLocalStorage">Daten unwiederruflich l\xf6schen</button></div><div>Session- & Local-Storage l\xf6schen: <button class="button button-round button-danger deleteAllStorage">Daten unwiederruflich l\xf6schen</button></div>`))(),$(".deleteLocalStorage").on("click",()=>{modal("Local-Storage wirklich leeren?","Willst du den Local-Storage wirklich l\xf6schen? Dabei gehen alle <b>permanenten</b> Daten von Scripten und \xe4hnlichem <b>unwiederruflich</b> verloren!","Ja, <b>unwiederruflich L\xd6SCHEN</b>","Nein, abbrechen",()=>{localStorage.clear(),localStorage.storage_resi_base=JSON.stringify(a()),tableModal(),reload()},()=>{tableModal()})}),$(".deleteSessionStorage").on("click",()=>{modal("Session-Storage wirklich leeren?","Willst du den Session-Storage wirklich l\xf6schen? Dabei gehen alle <b>tempor\xe4ren</b> Daten von Scripten und \xe4hnlichem <b>unwiederruflich</b> verloren!","Ja, <b>unwiederruflich L\xd6SCHEN</b>","Nein, abbrechen",()=>{sessionStorage.clear(),localStorage.storage_resi_base=JSON.stringify(a()),tableModal(),reload()},()=>{tableModal()})}),$(".deleteAllStorage").on("click",()=>{modal("Session- und Local-Storage wirklich leeren?","Willst du den Session-Storage und Local-Storage wirklich l\xf6schen? Dabei gehen alle <b>tempor\xe4ren</b> und <b>permanenten</b> Daten von Scripten und \xe4hnlichem <b>unwiederruflich</b> verloren!","Ja, <b>unwiederruflich L\xd6SCHEN</b>","Nein, abbrechen",()=>{sessionStorage.clear(),localStorage.storage_resi_base=JSON.stringify(a()),tableModal(),reload()},()=>{tableModal()})})}),c.contents().find("#importSettings").on("click",async()=>{function c(){noticeModal("Fehler beim Importieren der Codebase-Einstellungen","Einstellungen nicht valide","Schlie\xdfen")}var a,b=await inputModal({title:"Codebase-Einstellungen importieren",label:"Gib hier deine Einstellungen ein:",placeholder:"Gib hier die Codebase-Einstellungen ein"});try{var d=JSON.parse(b)}catch(e){c(),a=!0}a||(localStorage.storage_resi_base=b,reload())}),c.contents().find("#exportSettings").on("click",()=>{noticeModal("Codebase-Einstellungen exportieren",`Hier kannst du deine Einstellungen kopieren und an Freunde weitergeben:<div style='overflow:auto'><code>${JSON.stringify(i)}</code></div><br><button class="button button-round button-success" id="shareSettings">In Zwischenablage kopieren</button>`),$("#shareSettings").on("click",a=>{navigator.clipboard.writeText(JSON.stringify(i)).then(()=>{$(a.currentTarget).html("Kopiert!")})})}),c.contents().find("#resetStorage").on("click",()=>{modal("Alle Einstellungen zur\xfccksetzen","Willst du wirklich alle Einstellungen zur\xfccksetzten? Die aktuellen Einstellungen sind dann unwiderruflich verloren!","Ja, zur\xfccksetzen","Nein, behalten",()=>{localStorage.storage_resi_base=JSON.stringify(a()),reload()},()=>{})}),c.contents().find("#saveCodebaseSettings").on("click",h),c.off("load")})}),b.forEach(async a=>{try{i[a.settingsTarget]&&("/"!=location.pathname&&a.allSite&&await a.func(i),"/"==location.pathname&&await a.func(i))}catch(b){console.log(b),console.error(`Fehler im Modul ${a.name}`)}}),"/"==window.location.pathname){var c=`Running ${GM_info.script.name} in Version ${GM_info.script.version} on site ${window.location.href}!`;b.forEach(a=>{c+=`
${a.name}: ${i[a.settingsTarget]?"\u2714 aktiv":"\u2718 inaktiv"}`}),c+=`
Das Team der Codebase w\xfcnscht viel Spa\xdf!
Bei Fehlern kopiere bitte diesen Text und f\xfcge ihn in deine Fehlermeldung ein. Der Text enth\xe4lt wichtige Informationenn zu deinen verwendeten Modulen.`,console.log(c)}$(".openCodebaseSettings").on("click",()=>{$("#Codebase").click()})})()